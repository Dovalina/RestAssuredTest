package petStoreApi;

import io.restassured.RestAssured;
import io.restassured.http.ContentType;
import io.restassured.response.Response;

import static io.restassured.RestAssured.given;

import org.testng.annotations.Test;

import static org.hamcrest.Matchers.equalTo;




public class PetStoreApiTest extends TestConfig {

	 //BaseURI
//	public static String baseURI = "http://localhost:8080/api/v3";
	
	  @Test
	    public void addNewPet() {
		    String requestBody = "{\n" +
                    "  \"id\": 10,\n" +
                    "  \"name\": \"doggie\",\n" +
                    "  \"category\": {\n" +
                    "    \"id\": 1,\n" +
                    "    \"name\": \"Dogs\"\n" +
                    "  },\n" +
                    "  \"photoUrls\": [\n" +
                    "    \"http://example.com/photo.jpg\"\n" +
                    "  ],\n" +
                    "  \"tags\": [\n" +
                    "    {\n" +
                    "      \"id\": 0,\n" +
                    "      \"name\": \"tag1\"\n" +
                    "    }\n" +
                    "  ],\n" +
                    "  \"status\": \"available\"\n" +
                    "}";

		    // Realiza la solicitud POST
		    Response response = given()
		        .body(requestBody)
		        .header("Content-Type", "application/json")
		    .when()
		        .post("/pet");

		    // Verifica el código de estado y el cuerpo de la respuesta
		    response.then()
		        .statusCode(200)
		        .body("name", equalTo("Nueva Mascota"))
		        .body("id", equalTo(100));  // Verifica también el ID

		    // Obtener el nombre y el ID del nuevo registro de la respuesta
		    String name = response.jsonPath().getString("name");
		    int id = response.jsonPath().getInt("id");
		    
		    System.out.println("Se ha agregado una nueva mascota con el nombre: " + name + " y el ID: " + id);
	    }
		

	    public void testGetPetById() {
	        given()
	            .pathParam("petId", 1)
	        .when()
	            .get("/pet/{petId}")
	        .then()
	            .statusCode(200)
	            .body("id", equalTo(1));
	        System.out.println("A new pet was created");
	    }
	

}
